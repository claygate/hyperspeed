# Load secrets from macOS Keychain when needed
# To set: security add-generic-password -a "$USER" -s OPENROUTER_API_KEY -w '<YOUR-KEY>' -U
export OPENROUTER_API_KEY="${OPENROUTER_API_KEY:-$(security find-generic-password -w -s OPENROUTER_API_KEY 2>/dev/null || true)}"

# Autonomy slider for scripts: 0=plan-only (safe), 1=full-act
export AUTONOMY="${AUTONOMY:-0}"

# Added by Windsurf (user-specific)
[ -d "/Users/$USER/.codeium/windsurf/bin" ] && export PATH="/Users/$USER/.codeium/windsurf/bin:$PATH"

# Development environment setup
export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/bin:$PATH"
export EDITOR=vim
export VISUAL=vim

# Load completion system
autoload -Uz compinit
compinit

command -v zoxide >/dev/null && eval "$(zoxide init zsh)"
command -v starship >/dev/null && eval "$(starship init zsh)"
bindkey -v
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border --color=bg+:#313244,bg:#1e1e2e,spinner:#f5e0dc,hl:#f38ba8 --color=fg:#cdd6f4,header:#f38ba8,info:#cba6f7,pointer:#f5e0dc --color=marker:#f5e0dc,fg+:#cdd6f4,prompt:#cba6f7,hl+:#f38ba8"
command -v fzf >/dev/null && eval "$(fzf --zsh)"
command -v carapace >/dev/null && eval "$(carapace _carapace zsh)"
command -v direnv >/dev/null && eval "$(direnv hook zsh)"
command -v mise >/dev/null && eval "$(mise activate zsh)"
command -v atuin >/dev/null && eval "$(atuin init zsh)"
alias ls='eza -lah --group-directories-first --icons'
alias cat='bat'
alias grep='rg'

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
